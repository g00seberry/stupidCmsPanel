# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Blueprint System

> **–í–µ—Ä—Å–∏—è:** 1.0  
> **–î–∞—Ç–∞:** 2025-11-20  
> **–ó–∞–¥–∞—á:** 40

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–æ–≤](#–∫–ª—é—á–µ–≤—ã–µ-–∏–∑–º–µ–Ω–µ–Ω–∏—è-–≤–∏–∑—É–∞–ª—å–Ω—ã–π-—Ä–µ–¥–∞–∫—Ç–æ—Ä-–≥—Ä–∞—Ñ–æ–≤)
3. [–ë–ª–æ–∫ 1: –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏](#–±–ª–æ–∫-1-—Ç–∏–ø—ã-–¥–∞–Ω–Ω—ã—Ö-–∏-—Å—Ö–µ–º—ã-–≤–∞–ª–∏–¥–∞—Ü–∏–∏)
4. [–ë–ª–æ–∫ 2: API –∫–ª–∏–µ–Ω—Ç](#–±–ª–æ–∫-2-api-–∫–ª–∏–µ–Ω—Ç)
5. [–ë–ª–æ–∫ 3: –°—Ç–æ—Ä—ã MobX](#–±–ª–æ–∫-3-—Å—Ç–æ—Ä—ã-mobx)
6. [–ë–ª–æ–∫ 4: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–±–ª–æ–∫-4-ui-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
7. [–ë–ª–æ–∫ 5: –°—Ç—Ä–∞–Ω–∏—Ü—ã](#–±–ª–æ–∫-5-—Å—Ç—Ä–∞–Ω–∏—Ü—ã)
8. [–ë–ª–æ–∫ 6: –£—Ç–∏–ª–∏—Ç—ã –∏ —Ä–æ—É—Ç–∏–Ω–≥](#–±–ª–æ–∫-6-—É—Ç–∏–ª–∏—Ç—ã-–∏-—Ä–æ—É—Ç–∏–Ω–≥)
9. [–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏](#–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏-–º–µ–∂–¥—É-–∑–∞–¥–∞—á–∞–º–∏)

---

## –û–±–∑–æ—Ä

–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –¥–∞–Ω–Ω—ã—Ö (Blueprint System) stupidCMS.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

-   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Blueprint (CRUD)
-   –î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π (Path)
-   –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ Blueprint –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞
-   –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
-   –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—É—Ç–µ–π
-   –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**

-   TypeScript + Zod
-   React + MobX
-   Ant Design + Tailwind CSS
-   React Router
-   React Flow (–≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–æ–≤)

---

## –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–æ–≤

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–í–º–µ—Å—Ç–æ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ø–æ–ª–µ–π (Tree) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–æ–≤** –Ω–∞ –±–∞–∑–µ React Flow.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**–£–∑–ª—ã –≥—Ä–∞—Ñ–∞:**

1. **–ü—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** (string, int, bool –∏ —Ç.–¥.) - –∫–æ–Ω–µ—á–Ω—ã–µ —É–∑–ª—ã
2. **JSON –≥—Ä—É–ø–ø—ã** (data_type = json) - —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–µ —É–∑–ª—ã, –º–æ–≥—É—Ç –∏–º–µ—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ
3. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Blueprint** - readonly —É–∑–ª—ã, —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ –¥—Ä—É–≥–∏—Ö Blueprint

**–ü—Ä–∞–≤–∏–ª–∞:**

-   ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã –º–æ–∂–Ω–æ **—Ç–æ–ª—å–∫–æ –∫ —É–∑–ª–∞–º —Ç–∏–ø–∞ JSON**
-   ‚úÖ –í—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Blueprint –º–æ–∂–Ω–æ **—Ç–æ–ª—å–∫–æ –≤ —É–∑–ª—ã —Ç–∏–ø–∞ JSON**
-   ‚ùå –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É–∑–ª—ã (readonly) **–Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å**
-   ‚úÖ –ù–æ –≤ –ø–æ–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö Blueprint **–º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:**

-   –ù–∞–≥–ª—è–¥–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ö–µ–º—ã
-   –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ª–æ–∂–Ω—ã–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º
-   –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ readonly –ø–æ–ª–µ–π (—Å–µ—Ä—ã–π —Ü–≤–µ—Ç)
-   Drag & Drop –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ layout
-   –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –°–æ–∑–¥–∞–Ω–∏–µ Blueprint "Company" —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º "Address"

```
[–ö–æ—Ä–µ–Ω—å]
  ‚îú‚îÄ name (string, required, indexed)
  ‚îú‚îÄ office (json) ‚Üê —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π —É–∑–µ–ª
  ‚îÇ   ‚îî‚îÄ [Address Blueprint] ‚Üê –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π (readonly)
  ‚îÇ       ‚îú‚îÄ street (string, readonly)
  ‚îÇ       ‚îú‚îÄ city (string, readonly)
  ‚îÇ       ‚îî‚îÄ zip (string, readonly)
  ‚îî‚îÄ employees (json, many)
      ‚îî‚îÄ [Employee Blueprint] ‚Üê –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π
```

**–í –≥—Ä–∞—Ñ–µ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   name    ‚îÇ (—Å–∏–Ω–∏–π, –ø—Ä–æ—Å—Ç–æ–µ –ø–æ–ª–µ)
‚îÇ  string   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  office   ‚îÇ (–∑–µ–ª–µ–Ω—ã–π, json - —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π)
‚îÇ   json    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ
      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Address Blueprint‚îÇ (—Å–µ—Ä—ã–π, readonly)
‚îÇ   [–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº         ‚ñº        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ street ‚îÇ ‚îÇ city ‚îÇ ‚îÇ zip ‚îÇ (–≤—Å–µ —Å–µ—Ä—ã–µ, readonly)
‚îÇ string ‚îÇ ‚îÇstring‚îÇ ‚îÇstring‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install reactflow
npm install @types/dagre dagre
```

**package.json:**

```json
{
    "dependencies": {
        "reactflow": "^11.10.0",
        "dagre": "^0.8.5"
    },
    "devDependencies": {
        "@types/dagre": "^0.7.52"
    }
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
src/components/paths/
‚îú‚îÄ‚îÄ PathGraphEditor.tsx       # –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä (React Flow)
‚îú‚îÄ‚îÄ nodes/
‚îÇ   ‚îú‚îÄ‚îÄ SimpleFieldNode.tsx   # –£–∑–µ–ª –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ JsonGroupNode.tsx     # –£–∑–µ–ª JSON –≥—Ä—É–ø–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ EmbeddedBlueprintNode.tsx # –£–∑–µ–ª –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Blueprint
‚îú‚îÄ‚îÄ NodeForm.tsx              # –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–∞
‚îú‚îÄ‚îÄ NodeFormModal.tsx         # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π
‚îú‚îÄ‚îÄ GraphControls.tsx         # –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–æ–º
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ graphLayout.ts        # –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ (dagre)
    ‚îú‚îÄ‚îÄ pathToGraph.ts        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Path ‚Üí Graph
    ‚îî‚îÄ‚îÄ graphToPath.ts        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Graph ‚Üí Path
```

---

## –ë–ª–æ–∫ 1: –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### bp-001: –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è Blueprint

**–§–∞–π–ª:** `src/types/blueprint.ts`

**–°—Ö–µ–º—ã:**

```typescript
// –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ Blueprint
zBlueprint = z.object({
    id: z.number(),
    name: z.string(),
    code: z.string(),
    description: z.string().nullable(),
    paths_count: z.number().optional(),
    embeds_count: z.number().optional(),
    embedded_in_count: z.number().optional(),
    post_types_count: z.number().optional(),
    post_types: z.array(zPostType).optional(),
    created_at: z.string(),
    updated_at: z.string(),
});

// –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ Blueprint
zBlueprintListItem = z.object({
    id: z.number(),
    name: z.string(),
    code: z.string(),
    description: z.string().nullable(),
    paths_count: z.number(),
    embeds_count: z.number(),
    post_types_count: z.number(),
    created_at: z.string(),
    updated_at: z.string(),
});
```

### bp-002: –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è Path

**–§–∞–π–ª:** `src/types/path.ts`

**–°—Ö–µ–º—ã:**

```typescript
zDataType = z.enum([
    "string",
    "text",
    "int",
    "float",
    "bool",
    "date",
    "datetime",
    "json",
    "ref",
]);

zCardinality = z.enum(["one", "many"]);

zPath = z.object({
    id: z.number(),
    blueprint_id: z.number(),
    parent_id: z.number().nullable(),
    name: z.string(),
    full_path: z.string(),
    data_type: zDataType,
    cardinality: zCardinality,
    is_required: z.boolean(),
    is_indexed: z.boolean(),
    is_readonly: z.boolean(),
    sort_order: z.number(),
    validation_rules: z.array(z.any()).nullable(), // JSON –º–∞—Å—Å–∏–≤ (–ª—é–±—ã–µ —Ç–∏–ø—ã)
    source_blueprint_id: z.number().nullable(),
    blueprint_embed_id: z.number().nullable(),
    source_blueprint: z
        .object({
            id: z.number(),
            code: z.string(),
            name: z.string(),
        })
        .optional(),
    children: z.array(z.lazy(() => zPath)).optional(),
    created_at: z.string(),
    updated_at: z.string(),
});

zPathTreeNode = zPath.extend({
    children: z.array(z.lazy(() => zPathTreeNode)).optional(),
});
```

### bp-003: –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è BlueprintEmbed

**–§–∞–π–ª:** `src/types/blueprintEmbed.ts`

**–°—Ö–µ–º—ã:**

```typescript
zBlueprintEmbed = z.object({
    id: z.number(),
    blueprint_id: z.number(),
    embedded_blueprint_id: z.number(),
    host_path_id: z.number().nullable(),
    blueprint: z
        .object({
            id: z.number(),
            code: z.string(),
            name: z.string(),
        })
        .optional(),
    embedded_blueprint: z
        .object({
            id: z.number(),
            code: z.string(),
            name: z.string(),
        })
        .optional(),
    host_path: z
        .object({
            id: z.number(),
            name: z.string(),
            full_path: z.string(),
        })
        .nullable()
        .optional(),
    created_at: z.string(),
    updated_at: z.string(),
});
```

### bp-004: –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è DTO Blueprint

**–§–∞–π–ª:** `src/types/blueprint.ts`

**–°—Ö–µ–º—ã:**

```typescript
zCreateBlueprintDto = z.object({
    name: z
        .string()
        .min(1, "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ")
        .max(255, "–ú–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤"),
    code: z
        .string()
        .min(1, "–ö–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω")
        .max(255, "–ú–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤")
        .regex(/^[a-z0-9_]+$/, "–¢–æ–ª—å–∫–æ a-z, 0-9 –∏ _"),
    description: z.string().max(1000, "–ú–∞–∫—Å–∏–º—É–º 1000 —Å–∏–º–≤–æ–ª–æ–≤").optional(),
});

zUpdateBlueprintDto = z.object({
    name: z.string().min(1).max(255).optional(),
    code: z
        .string()
        .max(255)
        .regex(/^[a-z0-9_]+$/)
        .optional(),
    description: z.string().max(1000).optional(),
});
```

### bp-005: –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è DTO Path

**–§–∞–π–ª:** `src/types/path.ts`

**–°—Ö–µ–º—ã:**

```typescript
zCreatePathDto = z.object({
    name: z
        .string()
        .min(1, "–ò–º—è –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ")
        .max(255, "–ú–∞–∫—Å–∏–º—É–º 255 —Å–∏–º–≤–æ–ª–æ–≤")
        .regex(/^[a-z0-9_]+$/, "–¢–æ–ª—å–∫–æ a-z, 0-9 –∏ _"),
    parent_id: z.number().nullable().optional(),
    data_type: zDataType,
    cardinality: zCardinality.default("one"),
    is_required: z.boolean().default(false),
    is_indexed: z.boolean().default(false),
    sort_order: z.number().int().min(0, "–ú–∏–Ω–∏–º—É–º 0").default(0),
    validation_rules: z.array(z.any()).optional(), // JSON –º–∞—Å—Å–∏–≤ (–ª—é–±—ã–µ —Ç–∏–ø—ã)
});

zUpdatePathDto = zCreatePathDto.partial();
```

### bp-006: –°–æ–∑–¥–∞—Ç—å Zod —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤

**–§–∞–π–ª:** `src/types/blueprint.ts`

**–°—Ö–µ–º—ã:**

```typescript
zBlueprintDependencies = z.object({
    depends_on: z.array(
        z.object({
            id: z.number(),
            code: z.string(),
            name: z.string(),
        })
    ),
    depended_by: z.array(
        z.object({
            id: z.number(),
            code: z.string(),
            name: z.string(),
        })
    ),
});

zCanDeleteBlueprint = z.object({
    can_delete: z.boolean(),
    reasons: z.array(z.string()),
});

zEmbeddableBlueprints = z.object({
    data: z.array(
        z.object({
            id: z.number(),
            code: z.string(),
            name: z.string(),
        })
    ),
});

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API
zApiError = z.object({
    message: z.string(),
    errors: z.record(z.array(z.string())).optional(), // Laravel validation errors
});

// –¢–∏–ø—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
zPaginationLinks = z.object({
    first: z.string().nullable(),
    last: z.string().nullable(),
    prev: z.string().nullable(),
    next: z.string().nullable(),
});

zPaginationMeta = z.object({
    current_page: z.number(),
    from: z.number().nullable(),
    last_page: z.number(),
    path: z.string(),
    per_page: z.number(),
    to: z.number().nullable(),
    total: z.number(),
});

// Generic —Ç–∏–ø –¥–ª—è –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
export const zPaginatedResponse = <T extends z.ZodTypeAny>(dataSchema: T) =>
    z.object({
        data: z.array(dataSchema),
        links: zPaginationLinks,
        meta: zPaginationMeta,
    });
```

---

## –ë–ª–æ–∫ 2: API –∫–ª–∏–µ–Ω—Ç

### bp-007: –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç –¥–ª—è Blueprint CRUD

**–§–∞–π–ª:** `src/api/blueprintApi.ts`

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ Blueprint —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.
 */
export const listBlueprints = async (params: {
  search?: string;
  sort_by?: string;
  sort_dir?: 'asc' | 'desc';
  per_page?: number;
  page?: number;
}): Promise<z.infer<ReturnType<typeof zPaginatedResponse<typeof zBlueprintListItem>>>> => {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å Blueprint –ø–æ ID.
 */
export const getBlueprint = async (id: number): Promise<ZBlueprint> => {...}

/**
 * –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Blueprint.
 */
export const createBlueprint = async (dto: ZCreateBlueprintDto): Promise<ZBlueprint> => {...}

/**
 * –û–±–Ω–æ–≤–∏—Ç—å Blueprint.
 */
export const updateBlueprint = async (id: number, dto: ZUpdateBlueprintDto): Promise<ZBlueprint> => {...}

/**
 * –£–¥–∞–ª–∏—Ç—å Blueprint.
 */
export const deleteBlueprint = async (id: number): Promise<void> => {...}
```

### bp-008: –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç –¥–ª—è Path CRUD

**–§–∞–π–ª:** `src/api/pathApi.ts`

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ –ø–æ–ª–µ–π Blueprint.
 */
export const listPaths = async (blueprintId: number): Promise<ZPathTreeNode[]> => {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å Path –ø–æ ID.
 */
export const getPath = async (id: number): Promise<ZPath> => {...}

/**
 * –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ.
 */
export const createPath = async (blueprintId: number, dto: ZCreatePathDto): Promise<ZPath> => {...}

/**
 * –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ.
 */
export const updatePath = async (id: number, dto: ZUpdatePathDto): Promise<ZPath> => {...}

/**
 * –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ.
 */
export const deletePath = async (id: number): Promise<void> => {...}
```

### bp-009: –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç –¥–ª—è BlueprintEmbed CRUD

**–§–∞–π–ª:** `src/api/blueprintEmbedApi.ts`

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–π Blueprint.
 */
export const listEmbeds = async (blueprintId: number): Promise<ZBlueprintEmbed[]> => {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –ø–æ ID.
 */
export const getEmbed = async (id: number): Promise<ZBlueprintEmbed> => {...}

/**
 * –°–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ.
 */
export const createEmbed = async (blueprintId: number, dto: {
  embedded_blueprint_id: number;
  host_path_id?: number;
}): Promise<ZBlueprintEmbed> => {...}

/**
 * –£–¥–∞–ª–∏—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ.
 */
export const deleteEmbed = async (id: number): Promise<void> => {...}
```

### bp-010: –°–æ–∑–¥–∞—Ç—å API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

**–§–∞–π–ª:** `src/api/blueprintApi.ts`

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è Blueprint.
 */
export const canDeleteBlueprint = async (id: number): Promise<ZCanDeleteBlueprint> => {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Blueprint.
 */
export const getBlueprintDependencies = async (id: number): Promise<ZBlueprintDependencies> => {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ Blueprint –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è.
 */
export const getEmbeddableBlueprints = async (id: number): Promise<ZEmbeddableBlueprints> => {...}
```

---

## –ë–ª–æ–∫ 3: –°—Ç–æ—Ä—ã MobX

### bp-011: –°–æ–∑–¥–∞—Ç—å BlueprintStore –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–§–∞–π–ª:** `src/stores/BlueprintStore.ts`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```typescript
/**
 * Store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Blueprint.
 */
export class BlueprintStore {
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ
    blueprints: ZBlueprintListItem[] = [];
    currentBlueprint: ZBlueprint | null = null;
    pagination: PaginationMeta | null = null;

    // –§–ª–∞–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏
    pending = false;
    creating = false;
    updating = false;
    deleting = false;

    // –§–∏–ª—å—Ç—Ä—ã
    search = "";
    sortBy = "created_at";
    sortDir: "asc" | "desc" = "desc";
    perPage = 15;
    currentPage = 1;

    constructor() {
        makeAutoObservable(this);
    }
}
```

### bp-012: BlueprintStore –º–µ—Ç–æ–¥—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ Blueprint —Å —Ç–µ–∫—É—â–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.
 */
async loadBlueprints(): Promise<void> {...}

/**
 * –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.
 */
setSearch(value: string): void {...}

/**
 * –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É.
 */
setSort(sortBy: string, sortDir: 'asc' | 'desc'): void {...}

/**
 * –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
 */
goToPage(page: number): Promise<void> {...}
```

### bp-013: BlueprintStore –º–µ—Ç–æ–¥—ã CRUD

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ó–∞–≥—Ä—É–∑–∏—Ç—å Blueprint –ø–æ ID.
 */
async loadBlueprint(id: number): Promise<void> {...}

/**
 * –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Blueprint.
 */
async createBlueprint(dto: ZCreateBlueprintDto): Promise<ZBlueprint> {...}

/**
 * –û–±–Ω–æ–≤–∏—Ç—å Blueprint.
 */
async updateBlueprint(id: number, dto: ZUpdateBlueprintDto): Promise<void> {...}

/**
 * –£–¥–∞–ª–∏—Ç—å Blueprint.
 */
async deleteBlueprint(id: number): Promise<void> {...}
```

### bp-014: BlueprintStore –º–µ—Ç–æ–¥—ã –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è.
 */
async checkCanDelete(id: number): Promise<ZCanDeleteBlueprint> {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
 */
async loadDependencies(id: number): Promise<ZBlueprintDependencies> {...}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è.
 */
async loadEmbeddable(id: number): Promise<ZEmbeddableBlueprints> {...}
```

### bp-015: –°–æ–∑–¥–∞—Ç—å PathStore

**–§–∞–π–ª:** `src/stores/PathStore.ts`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```typescript
/**
 * Store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è–º–∏ Blueprint (Path).
 */
export class PathStore {
  paths: ZPathTreeNode[] = []
  currentPath: ZPath | null = null
  pending = false
  blueprintId: number | null = null

  constructor() {
    makeAutoObservable(this)
  }

  /**
   * –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ä–µ–≤–æ –ø–æ–ª–µ–π Blueprint.
   */
  async loadPaths(blueprintId: number): Promise<void> {...}
}
```

### bp-016: PathStore –º–µ—Ç–æ–¥—ã CRUD

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ.
 */
async createPath(dto: ZCreatePathDto): Promise<ZPath> {...}

/**
 * –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ —Å –ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç–æ–º full_path –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
 */
async updatePath(id: number, dto: ZUpdatePathDto): Promise<void> {...}

/**
 * –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ (—Å –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–æ—á–µ—Ä–Ω–∏—Ö).
 */
async deletePath(id: number): Promise<void> {...}

/**
 * –í—ã—á–∏—Å–ª–∏—Ç—å full_path –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞.
 */
computeFullPath(name: string, parentId: number | null): string {...}
```

### bp-017: –°–æ–∑–¥–∞—Ç—å BlueprintEmbedStore

**–§–∞–π–ª:** `src/stores/BlueprintEmbedStore.ts`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```typescript
/**
 * Store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è–º–∏ Blueprint.
 */
export class BlueprintEmbedStore {
  embeds: ZBlueprintEmbed[] = []
  embeddableBlueprints: Array<{id: number, code: string, name: string}> = []
  pending = false
  blueprintId: number | null = null

  constructor() {
    makeAutoObservable(this)
  }

  /**
   * –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–π.
   */
  async loadEmbeds(blueprintId: number): Promise<void> {...}
}
```

### bp-018: BlueprintEmbedStore –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ CRUD

**–ú–µ—Ç–æ–¥—ã:**

```typescript
/**
 * –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è Blueprint.
 */
async loadEmbeddable(blueprintId: number): Promise<void> {...}

/**
 * –°–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
 */
async createEmbed(dto: {
  embedded_blueprint_id: number;
  host_path_id?: number;
}): Promise<ZBlueprintEmbed> {...}

/**
 * –£–¥–∞–ª–∏—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ.
 */
async deleteEmbed(id: number): Promise<void> {...}
```

---

## –ë–ª–æ–∫ 4: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### bp-019: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç BlueprintList

**–§–∞–π–ª:** `src/components/blueprints/BlueprintList.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–∞–±–ª–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º Blueprint (AntD Table).

**–ö–æ–ª–æ–Ω–∫–∏:**

-   name (—Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
-   code
-   description
-   paths_count
-   embeds_count
-   post_types_count
-   created_at
-   –î–µ–π—Å—Ç–≤–∏—è (–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –£–¥–∞–ª–∏—Ç—å)

### bp-020: BlueprintList —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

-   Input –¥–ª—è –ø–æ–∏—Å–∫–∞ (debounce)
-   Select –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (–ø–æ name, code, created_at)
-   Radio –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
-   Pagination (AntD)

### bp-021: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç BlueprintForm

**–§–∞–π–ª:** `src/components/blueprints/BlueprintForm.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Blueprint (AntD Form).

**–ü–æ–ª—è:**

-   name (Input, required)
-   code (Input, required, regex: a-z0-9\_)
-   description (TextArea, optional)

### bp-022: BlueprintForm –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

-   –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zod —Å—Ö–µ–º–∞–º–∏
-   –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–∑ API
-   –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ code

### bp-023: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç PathGraphEditor (–≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)

**–§–∞–π–ª:** `src/components/paths/PathGraphEditor.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–æ–≤ –¥–ª—è —Å—Ö–µ–º—ã Blueprint (React Flow).

**–§—É–Ω–∫—Ü–∏–∏:**

-   –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–∑–ª–æ–≤ (Path) –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∞
-   –£–∑–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å: –ø—Ä–æ—Å—Ç–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ò–õ–ò –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Blueprint
-   –°–≤—è–∑–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ (parent ‚Üí children)
-   Drag&drop –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —É–∑–ª–æ–≤
-   –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ —Ç–æ–ª—å–∫–æ –∫ —É–∑–ª–∞–º —Ç–∏–ø–∞ `json`
-   –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è readonly —É–∑–ª–æ–≤ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Blueprint)

**–¢–∏–ø—ã —É–∑–ª–æ–≤:**

1. **SimpleFieldNode** - –ø—Ä–æ—Å—Ç–æ–µ –ø–æ–ª–µ (string, int, bool –∏ —Ç.–¥.)
2. **JsonGroupNode** - –≥—Ä—É–ø–ø–∞ –ø–æ–ª–µ–π (json), –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã
3. **EmbeddedBlueprintNode** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Blueprint (readonly, –Ω–æ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ)

### bp-024: PathGraphEditor –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —É–∑–ª–æ–≤:**

-   **–ò–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö:**
    -   üìù string/text
    -   üî¢ int/float
    -   ‚òëÔ∏è bool
    -   üìÖ date/datetime
    -   üîó ref
    -   üì¶ json (—Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π)
-   **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
    -   üîí is_readonly (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π blueprint, —Å–µ—Ä—ã–π —Ñ–æ–Ω)
    -   ‚≠ê is_required (–∫—Ä–∞—Å–Ω–∞—è –∑–≤–µ–∑–¥–æ—á–∫–∞)
    -   üîç is_indexed (–∏–∫–æ–Ω–∫–∞ –∏–Ω–¥–µ–∫—Å–∞)
-   **–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞:**
    -   –°–∏–Ω–∏–π - –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã (string, int, bool –∏ —Ç.–¥.)
    -   –ó–µ–ª–µ–Ω—ã–π - json (–≥—Ä—É–ø–ø—ã, —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–µ)
    -   –°–µ—Ä—ã–π - readonly (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ blueprint)
    -   –§–∏–æ–ª–µ—Ç–æ–≤—ã–π - ref (—Å—Å—ã–ª–∫–∏)
-   **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ —É–∑–ª–µ:**
    -   –î–æ–±–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª (—Ç–æ–ª—å–∫–æ –¥–ª—è json)
    -   –í—Å—Ç—Ä–æ–∏—Ç—å Blueprint (—Ç–æ–ª—å–∫–æ –¥–ª—è json)
    -   –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –Ω–µ readonly)
    -   –£–¥–∞–ª–∏—Ç—å (–µ—Å–ª–∏ –Ω–µ readonly)
-   **Tooltip:**
    -   full_path
    -   –î–ª—è readonly: –∏—Å—Ç–æ—á–Ω–∏–∫ (source_blueprint)

### bp-025: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç NodeForm (—Ñ–æ—Ä–º–∞ —É–∑–ª–∞ –≥—Ä–∞—Ñ–∞)

**–§–∞–π–ª:** `src/components/paths/NodeForm.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–∞ —Å—Ö–µ–º—ã (Path –∏–ª–∏ Embed).

**–†–µ–∂–∏–º—ã:**

1. **–ü—Ä–æ—Å—Ç–æ–µ –ø–æ–ª–µ** (data_type –Ω–µ json):

    - name (Input, required, regex: a-z0-9\_)
    - data_type (Select: string, text, int, float, bool, date, datetime, ref)
    - cardinality (Radio: one/many)
    - is_required (Checkbox)
    - is_indexed (Checkbox + –ø–æ–¥—Å–∫–∞–∑–∫–∞)
    - validation_rules (TagInput, optional)

2. **JSON –≥—Ä—É–ø–ø–∞** (data_type = json):

    - name (Input, required, regex: a-z0-9\_)
    - cardinality (Radio: one/many)
    - –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã

3. **–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ Blueprint** (–≤—ã–±–æ—Ä –∏–∑ embeddable):
    - embedded_blueprint_id (Select –∏–∑ embeddable —Å–ø–∏—Å–∫–∞)
    - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ Blueprint
    - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: —É–∑–ª—ã –±—É–¥—É—Ç readonly

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**

-   –ù–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É–∑–ª—ã —Å `is_readonly = true`
-   –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ readonly —É–∑–ª–∞ –ø–æ–∫–∞–∑–∞—Ç—å: "–≠—Ç–æ—Ç —É–∑–µ–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ {source_blueprint.name}. –ò–∑–º–µ–Ω–∏—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π Blueprint."

### bp-026: NodeForm –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

-   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç full_path:**
    -   –ü—Ä–∏ –≤–≤–æ–¥–µ name –∏ –≤—ã–±–æ—Ä–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–∑–ª–∞ (–≤ –≥—Ä–∞—Ñ–µ)
    -   –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `–ü–æ–ª–Ω—ã–π –ø—É—Ç—å: author.contacts.email`
-   **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏:**
    -   –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏ –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ
    -   –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
-   **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–∏–ø–∞:**
    -   –ü–æ–∫–∞–∑–∞—Ç—å –∏–∫–æ–Ω–∫—É –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ data_type
    -   –î–ª—è ref: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞ –∫–∞–∫—É—é —Å—É—â–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∫–∞)

### bp-027: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç NodeFormModal –∏ GraphControls

**–§–∞–π–ª:** `src/components/paths/NodeFormModal.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å NodeForm (AntD Modal).

**–§—É–Ω–∫—Ü–∏–∏:**

-   **–†–µ–∂–∏–º—ã —Å–æ–∑–¥–∞–Ω–∏—è:**
    -   –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —É–∑–ª–∞ (–±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª—è)
    -   –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ —É–∑–ª–∞ (—Å parentId - —Ç–æ–ª—å–∫–æ –¥–ª—è json —É–∑–ª–æ–≤)
    -   –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ Blueprint –≤ —É–∑–µ–ª json
-   **–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
    -   –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ —É–∑–ª–∞ (–µ—Å–ª–∏ –Ω–µ readonly)
    -   –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ readonly —É–∑–ª–∞—Ö
-   **–û–±—Ä–∞–±–æ—Ç–∫–∞:**
    -   –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Å Zod
    -   Submit —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –≥—Ä–∞—Ñ–∞
    -   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É–∑–ª–∞ –Ω–∞ –≥—Ä–∞—Ñ–µ

**–§–∞–π–ª:** `src/components/paths/GraphControls.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–æ–º.

**–≠–ª–µ–º–µ–Ω—Ç—ã:**

-   –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —É–∑–µ–ª"
-   –ö–Ω–æ–ø–∫–∞ "–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ"
-   –ö–Ω–æ–ø–∫–∞ "–ê–≤—Ç–æ-–∫–æ–º–ø–æ–Ω–æ–≤–∫–∞"
-   Zoom controls
-   –ö–Ω–æ–ø–∫–∞ "–í—Å—Ç—Ä–æ–∏—Ç—å Blueprint" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö)
-   –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π / –ü–æ–¥—Ä–æ–±–Ω—ã–π

### bp-028: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç EmbedList

**–§–∞–π–ª:** `src/components/embeds/EmbedList.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–π (AntD List –∏–ª–∏ Table).

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**

-   embedded_blueprint (name, code)
-   host_path (full_path –∏–ª–∏ "–ö–æ—Ä–µ–Ω—å")
-   created_at
-   –ö–Ω–æ–ø–∫–∞ –£–¥–∞–ª–∏—Ç—å
-   –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤ –≥—Ä–∞—Ñ–µ" (—Å–∫—Ä–æ–ª–ª–∏—Ç –∫ —É–∑–ª—É –∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥—Ä–∞—Ñ–æ–º:**

-   –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤ –≥—Ä–∞—Ñ–µ" ‚Üí —Å–∫—Ä–æ–ª–ª–∏—Ç –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —É–∑–ª—É –≤ PathGraphEditor
-   –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –≤—Å–µ —É–∑–ª—ã, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–µ —ç—Ç–æ–º—É –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—é (—á–µ—Ä–µ–∑ source_blueprint_id)
-   –ê–Ω–∏–º–∞—Ü–∏—è: —É–∑–ª—ã –º–µ—Ä—Ü–∞—é—Ç –∏–ª–∏ –º–µ–Ω—è—é—Ç —Ü–≤–µ—Ç –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã

### bp-029: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç EmbedForm

**–§–∞–π–ª:** `src/components/embeds/EmbedForm.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è (wizard –∏–ª–∏ –ø—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞).

**–®–∞–≥–∏:**

1. –í—ã–±–æ—Ä Blueprint –∏–∑ embeddable —Å–ø–∏—Å–∫–∞
2. –í—ã–±–æ—Ä host_path (TreeSelect + –æ–ø—Ü–∏—è "–í –∫–æ—Ä–µ–Ω—å")

### bp-030: EmbedForm –≤—ã–±–æ—Ä –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

-   Select/Cards –¥–ª—è –≤—ã–±–æ—Ä–∞ Blueprint
-   –ü–æ–∏—Å–∫ –ø–æ name/code
-   –ü—Ä–µ–≤—å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ Blueprint (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π)
-   –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö

### bp-031: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç DependencyGraph

**–§–∞–π–ª:** `src/components/blueprints/DependencyGraph.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

-   –ü—Ä–æ—Å—Ç–æ–π: –¥–≤–∞ —Å–ø–∏—Å–∫–∞ (depends_on, depended_by)
-   –°–ª–æ–∂–Ω—ã–π: –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (react-flow, vis.js)

### bp-032: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç BlueprintDeleteConfirm

**–§–∞–π–ª:** `src/components/blueprints/BlueprintDeleteConfirm.tsx`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è (AntD Modal.confirm).

**–§—É–Ω–∫—Ü–∏–∏:**

-   –ó–∞–ø—Ä–æ—Å can-delete –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º
-   –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ reasons –µ—Å–ª–∏ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å
-   –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –£–¥–∞–ª–∏—Ç—å –µ—Å–ª–∏ can_delete = false

---

## –ë–ª–æ–∫ 5: –°—Ç—Ä–∞–Ω–∏—Ü—ã

### bp-033: –°—Ç—Ä–∞–Ω–∏—Ü–∞ BlueprintsListPage

**–§–∞–π–ª:** `src/pages/blueprints/BlueprintsListPage.tsx`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```tsx
<Page title="Blueprint">
    <PageHeader
        title="–°–ø–∏—Å–æ–∫ Blueprint"
        extra={
            <Link to="/blueprints/new">
                <Button>–°–æ–∑–¥–∞—Ç—å</Button>
            </Link>
        }
    />
    <BlueprintList />
</Page>
```

### bp-034: –°—Ç—Ä–∞–Ω–∏—Ü–∞ BlueprintEditPage

**–§–∞–π–ª:** `src/pages/blueprints/BlueprintEditPage.tsx`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```tsx
<Page title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Blueprint">
    <PageHeader title={blueprint.name} />
    <BlueprintForm /> {/* –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
    <Tabs>
        <TabPane tab="–ü–æ–ª—è" key="paths">
            ...
        </TabPane>
        <TabPane tab="–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è" key="embeds">
            ...
        </TabPane>
        <TabPane tab="–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏" key="dependencies">
            ...
        </TabPane>
    </Tabs>
</Page>
```

### bp-035: BlueprintEditPage –≤–∫–ª–∞–¥–∫–∞ –°—Ö–µ–º–∞ (–≥—Ä–∞—Ñ)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

-   **PathGraphEditor** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–∞ —Å—Ö–µ–º—ã
-   **GraphControls** - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–æ–º
-   **NodeFormModal** - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤
-   **Sidebar** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É–∑–ª–µ:
    -   –°–≤–æ–π—Å—Ç–≤–∞ —É–∑–ª–∞ (name, type, full_path)
    -   –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—á–µ—Ä–Ω–∏—Ö)
    -   –î–ª—è readonly: –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ source_blueprint

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

-   –ö–ª–∏–∫ –Ω–∞ —É–∑–µ–ª ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å sidebar —Å –¥–µ—Ç–∞–ª—è–º–∏
-   –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ —É–∑–µ–ª ‚Üí –æ—Ç–∫—Ä—ã—Ç—å NodeFormModal –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
-   –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é (–ü–ö–ú) –Ω–∞ —É–∑–ª–µ:
    -   –î–æ–±–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª (—Ç–æ–ª—å–∫–æ –¥–ª—è json)
    -   –í—Å—Ç—Ä–æ–∏—Ç—å Blueprint –∑–¥–µ—Å—å (—Ç–æ–ª—å–∫–æ –¥–ª—è json)
    -   –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
    -   –£–¥–∞–ª–∏—Ç—å (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
-   Drag —É–∑–ª–æ–≤ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ layout
-   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∞ (–∞–ª–≥–æ—Ä–∏—Ç–º dagre/elk)
-   –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏

### bp-036: BlueprintEditPage –≤–∫–ª–∞–¥–∫–∞ –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

-   EmbedList (—Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–π)
-   –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ"
-   EmbedForm (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)

### bp-037: BlueprintEditPage –≤–∫–ª–∞–¥–∫–∞ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

-   DependencyGraph (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
-   –î–≤–∞ —Ä–∞–∑–¥–µ–ª–∞: "–ó–∞–≤–∏—Å–∏—Ç –æ—Ç" –∏ "–ó–∞–≤–∏—Å–∏–º—ã –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ"
-   –°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–≤–∏—Å–∏–º—ã–µ Blueprint

---

## –ë–ª–æ–∫ 6: –£—Ç–∏–ª–∏—Ç—ã –∏ —Ä–æ—É—Ç–∏–Ω–≥

### bp-038: –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `src/utils/blueprintErrors.ts`

**–§—É–Ω–∫—Ü–∏–∏:**

```typescript
/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
 */
export const handleCyclicDependencyError = (error: AxiosError): string => {...}

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø—É—Ç–µ–π.
 */
export const handlePathConflictError = (error: AxiosError): string => {...}

/**
 * –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è readonly –ø–æ–ª—è.
 */
export const handleReadonlyFieldError = (error: AxiosError): string => {...}
```

### bp-039: –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–§–∞–π–ª:** `src/utils/blueprintValidation.ts`

**–§—É–Ω–∫—Ü–∏–∏:**

```typescript
/**
 * –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ code (a-z0-9_).
 * Max –¥–ª–∏–Ω–∞: 255 —Å–∏–º–≤–æ–ª–æ–≤.
 */
export const validateBlueprintCode = (code: string): boolean => {
    return /^[a-z0-9_]+$/.test(code) && code.length <= 255;
};

/**
 * –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ name –ø–æ–ª—è (a-z0-9_).
 * Max –¥–ª–∏–Ω–∞: 255 —Å–∏–º–≤–æ–ª–æ–≤.
 */
export const validateFieldName = (name: string): boolean => {
    return /^[a-z0-9_]+$/.test(name) && name.length <= 255;
};

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ code (–ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É).
 */
export const formatBlueprintCode = (code: string): string => {
    return code.toLowerCase().replace(/[^a-z0-9_]/g, "");
};

/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–µ—Ç –ª–∏ host_path —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ.
 * –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª—è —Ç–∏–ø–∞ JSON.
 * ‚úÖ –í–ê–ñ–ù–û: –≠—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –î–£–ë–õ–ò–†–£–ï–¢ –≤–∞–ª–∏–¥–∞—Ü–∏—é –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è –ª—É—á—à–µ–≥–æ UX.
 */
export const canEmbedInPath = (path: ZPath | null): boolean => {
    if (!path) return true; // –ö–æ—Ä–Ω–µ–≤–æ–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
    return path.data_type === "json";
};

/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –ø–æ–ª—è –Ω–∞ —É—Ä–æ–≤–Ω–µ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è).
 * ‚úÖ –í–ê–ñ–ù–û: –ë—ç–∫–µ–Ω–¥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ full_path, –Ω–æ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç
 * –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞—Ä–∞–Ω–µ–µ.
 */
export const isNameUniqueAtLevel = (
    name: string,
    parentId: number | null,
    existingPaths: ZPath[]
): boolean => {
    return !existingPaths.some(
        (p) => p.name === name && p.parent_id === parentId
    );
};
```

### bp-040: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞

**–§–∞–π–ª:** `src/App.tsx` –∏–ª–∏ `src/routes.tsx`

**–†–æ—É—Ç—ã:**

```tsx
<Route path="/blueprints" element={<BlueprintsListPage />} />
<Route path="/blueprints/new" element={<BlueprintCreatePage />} />
<Route path="/blueprints/:id" element={<BlueprintEditPage />} />
```

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

**–≠—Ç–∞–ø 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)**

-   bp-001 –¥–æ bp-006 (—Ç–∏–ø—ã)

**–≠—Ç–∞–ø 2: API —Å–ª–æ–π**

-   bp-007 –¥–æ bp-010 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —ç—Ç–∞–ø–∞ 1)

**–≠—Ç–∞–ø 3: –°—Ç–æ—Ä—ã**

-   bp-011 –¥–æ bp-018 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —ç—Ç–∞–ø–æ–≤ 1-2)

**–≠—Ç–∞–ø 4: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 3)**

-   bp-021, bp-022 (BlueprintForm)
-   bp-025, bp-026, bp-027 (PathForm)
-   bp-029, bp-030 (EmbedForm)

**–≠—Ç–∞–ø 5: –°–ª–æ–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

-   bp-019, bp-020 (BlueprintList)
-   bp-023, bp-024 (PathTreeView)
-   bp-028 (EmbedList)
-   bp-031 (DependencyGraph)
-   bp-032 (DeleteConfirm)

**–≠—Ç–∞–ø 6: –°—Ç—Ä–∞–Ω–∏—Ü—ã**

-   bp-033 (ListPage - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç bp-019, bp-020)
-   bp-034 –¥–æ bp-037 (EditPage - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

**–≠—Ç–∞–ø 7: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è**

-   bp-038, bp-039 (—É—Ç–∏–ª–∏—Ç—ã - –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
-   bp-040 (—Ä–æ—É—Ç–∏–Ω–≥ - –ø–æ—Å–ª–µ–¥–Ω–∏–π)

---

## –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –û–±—â–µ–µ

-   [ ] –í—Å–µ Zod —Å—Ö–µ–º—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
    -   [x] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã max –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (name: 255, code: 255, description: 1000)
    -   [x] ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–∏–ø validation_rules (z.any() –≤–º–µ—Å—Ç–æ z.string())
    -   [x] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ .min(0) –¥–ª—è sort_order
-   [ ] API –∫–ª–∏–µ–Ω—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ endpoints
    -   [x] ‚úÖ –í—Å–µ endpoints —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±—ç–∫–µ–Ω–¥—É
-   [ ] –°—Ç–æ—Ä—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
-   [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
-   [ ] –°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
-   [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∫–µ–π—Å—ã
    -   [x] ‚úÖ –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (CyclicDependencyException)
    -   [x] ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—É—Ç–µ–π (PathConflictException)
    -   [x] ‚úÖ Readonly –ø–æ–ª—è (LogicException)
    -   [ ] Validation errors (422 —Å errors –æ–±—ä–µ–∫—Ç–æ–º)
-   [ ] –†–æ—É—Ç–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
-   [ ] UI —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç UX —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –∏–∑ API Blueprint

### –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–æ–≤

-   [ ] React Flow —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
-   [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã 3 —Ç–∏–ø–∞ custom —É–∑–ª–æ–≤ (SimpleFieldNode, JsonGroupNode, EmbeddedBlueprintNode)
-   [ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Path API ‚Üí React Flow –≥—Ä–∞—Ñ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
-   [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞ (dagre layout) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
-   [ ] –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ —É–∑–ª–∞—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç (–ü–ö–ú)
-   [ ] –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
-   [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è json —Ç–∏–ø–æ–≤
    -   [x] ‚úÖ –ë–≠–ö–ï–ù–î –í–ê–õ–ò–î–ò–†–£–ï–¢: host_path.data_type === 'json'
    -   [ ] –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ canEmbedInPath()
-   [ ] Readonly —É–∑–ª—ã –Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ UI)
    -   [x] ‚úÖ –ë–≠–ö–ï–ù–î –í–ê–õ–ò–î–ò–†–£–ï–¢: path.isCopied() –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
-   [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ (—Ü–≤–µ—Ç–∞, –∏–∫–æ–Ω–∫–∏) —Ä–∞–±–æ—Ç–∞–µ—Ç
-   [ ] Tooltip —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
-   [ ] –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (GraphControls) —Ä–∞–±–æ—Ç–∞–µ—Ç:
    -   [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —É–∑–µ–ª
    -   [ ] –í—Å—Ç—Ä–æ–∏—Ç—å Blueprint
    -   [ ] –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ
    -   [ ] –ê–≤—Ç–æ-–∫–æ–º–ø–æ–Ω–æ–≤–∫–∞
    -   [ ] Zoom controls
-   [ ] Sidebar —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É–∑–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
-   [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≥—Ä–∞—Ñ–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å MobX store
-   [ ] –ì—Ä–∞—Ñ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
-   [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è, —á–µ—Ä–µ–∑ isNameUniqueAtLevel())

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±—ç–∫–µ–Ω–¥–∞

> **–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-11-20  
> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥-–ø–ª–∞–Ω **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** –±—ç–∫–µ–Ω–¥-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –º–∏–Ω–æ—Ä–Ω—ã–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

1. **–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ JSON —É–∑–ª—ã** (BlueprintStructureService, —Å—Ç—Ä–æ–∫–∞ 372-376):

    ```php
    if ($hostPath->data_type !== 'json') {
        throw new \InvalidArgumentException(
            "host_path –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥—Ä—É–ø–ø–æ–π (data_type = 'json')."
        );
    }
    ```

2. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (CyclicDependencyValidator):

    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º embed
    - –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `CyclicDependencyException`

3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—É—Ç–µ–π** (PathConflictValidator):

    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ embed
    - –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `PathConflictException`

4. **Readonly –ø–æ–ª—è** (BlueprintStructureService, —Å—Ç—Ä–æ–∫–∞ 170-177):

    ```php
    if ($path->isCopied()) {
        throw new \LogicException(
            "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–µ."
        );
    }
    ```

5. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å full_path** (–ú–∏–≥—Ä–∞—Ü–∏—è paths, —Å—Ç—Ä–æ–∫–∞ 38-50):
    ```sql
    CREATE UNIQUE INDEX uq_paths_full_path_per_blueprint
    ON paths (blueprint_id, full_path(766))
    ```

### üìù –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

-   **validation_rules**: JSON –ø–æ–ª–µ (–º–∞—Å—Å–∏–≤/–æ–±—ä–µ–∫—Ç –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã) ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Å—Ö–µ–º–∞—Ö
-   **sort_order**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `>= 0` ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ `.min(0)`
-   **max –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: Blueprint/Path –∏–º–µ—é—Ç –ª–∏–º–∏—Ç—ã –¥–ª–∏–Ω—ã ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ `.max()`
-   **children –≤ PathTreeNode**: ‚ö†Ô∏è **–ò–°–ü–†–ê–í–õ–ï–ù–û** - `whenLoaded` –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å `undefined`, –ø–æ—ç—Ç–æ–º—É –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ `.optional()` –≤–º–µ—Å—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞. –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `path.children ?? []`

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

1. **Validation_rules —Ñ–æ—Ä–º–∞—Ç**: –ë—ç–∫–µ–Ω–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π JSON. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

    ```typescript
    // –ì–∏–±–∫–∏–π –ø–æ–¥—Ö–æ–¥
    validation_rules: z.array(z.any()).optional();

    // –ò–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω —Ñ–æ—Ä–º–∞—Ç)
    validation_rules: z.array(
        z.object({
            rule: z.string(),
            value: z.any().optional(),
        })
    ).optional();
    ```

2. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è name**: –ü—Ä–æ–≤–µ—Ä—è—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–ª—è –ª—É—á—à–µ–≥–æ UX, –Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ full_path.

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –í—Å–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å HTTP 422 –∏ –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –°–ª–æ–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **React Flow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
    - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ Path –≤ –≥—Ä–∞—Ñ —É–∑–ª–æ–≤ –∏ —Å–≤—è–∑–µ–π (edges)
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∞ (dagre layout algorithm)
    - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≥—Ä–∞—Ñ–∞ —Å MobX store
    - Custom Node Components –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
2. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
    - –¢–æ–ª—å–∫–æ —É–∑–ª—ã —Ç–∏–ø–∞ `json` –º–æ–≥—É—Ç –∏–º–µ—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã
    - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Blueprint —É–∑–ª—ã (readonly) –Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å
    - –ù–æ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö Blueprint
    - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ –∫ non-json —Ç–∏–ø–∞–º
    - ‚úÖ **–ë–≠–ö–ï–ù–î –í–ê–õ–ò–î–ò–†–£–ï–¢:** `host_path.data_type === 'json'` (BlueprintStructureService::validateHostPath)
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–∏–∫–ª–æ–≤:**
    - ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ù–ê –ë–≠–ö–ï:** CyclicDependencyValidator (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ embed)
    - –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è:** –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Blueprint –ø–µ—Ä–µ–¥ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ–º
5. **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–º Blueprint –¥–æ–ª–∂–Ω—ã –æ—Ç—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º—ã—Ö
6. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø—É—Ç–µ–π:**
    - ‚úÖ **–ë–≠–ö–ï–ù–î –ì–ê–†–ê–ù–¢–ò–†–£–ï–¢:** —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `(blueprint_id, full_path)` —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å
    - –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å name –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–ª—è –ª—É—á—à–µ–≥–æ UX

### React Flow –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

**–¢–∏–ø—ã —É–∑–ª–æ–≤:**

```typescript
// –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–ª–µ
type SimpleFieldNode = {
    id: string; // path.id
    type: "simpleField";
    data: {
        path: ZPath;
        label: string;
        dataType: ZDataType;
        isRequired: boolean;
        isIndexed: boolean;
        isReadonly: boolean;
    };
    position: { x: number; y: number };
};

// JSON –≥—Ä—É–ø–ø–∞ (—Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è)
type JsonGroupNode = {
    id: string;
    type: "jsonGroup";
    data: {
        path: ZPath;
        label: string;
        childCount: number;
        isReadonly: boolean;
    };
    position: { x: number; y: number };
};

// –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Blueprint
type EmbeddedBlueprintNode = {
    id: string;
    type: "embeddedBlueprint";
    data: {
        path: ZPath;
        sourceBlueprintName: string;
        sourceBlueprintCode: string;
        childCount: number;
    };
    position: { x: number; y: number };
};
```

**–°–≤—è–∑–∏ (Edges):**

```typescript
type PathEdge = {
    id: string;
    source: string; // parent path id
    target: string; // child path id
    type: "smoothstep"; // –∏–ª–∏ 'default'
    animated: boolean; // –¥–ª—è readonly —É–∑–ª–æ–≤
};
```

**Layout –∞–ª–≥–æ—Ä–∏—Ç–º:**

-   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dagre` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏
-   –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Top-to-Bottom (TB) –∏–ª–∏ Left-to-Right (LR)
-   –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏: 100px –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, 80px –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
-   –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**

-   `nodesDraggable={true}` - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —É–∑–ª—ã
-   `nodesConnectable={false}` - –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤—è–∑–∏ –º—ã—à—å—é (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É)
-   `elementsSelectable={true}` - –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å —É–∑–ª—ã
-   –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —á–µ—Ä–µ–∑ `onNodeContextMenu`
-   –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ —á–µ—Ä–µ–∑ `onNodeDoubleClick`

**–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö API ‚Üî –ì—Ä–∞—Ñ:**

```typescript
// src/components/paths/utils/pathToGraph.ts

/**
 * –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–µ—Ä–µ–≤–æ Path –∏–∑ API –≤ —É–∑–ª—ã –∏ —Å–≤—è–∑–∏ –¥–ª—è React Flow.
 */
export const pathTreeToGraph = (
    paths: ZPathTreeNode[]
): { nodes: Node[]; edges: Edge[] } => {
    const nodes: Node[] = [];
    const edges: Edge[] = [];

    const traverse = (
        path: ZPathTreeNode,
        level: number,
        parentX: number,
        parentY: number
    ) => {
        // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —É–∑–ª–∞
        let nodeType = "simpleField";
        if (path.data_type === "json") {
            nodeType = "jsonGroup";
        }
        if (path.is_readonly && path.source_blueprint_id) {
            nodeType = "embeddedBlueprint";
        }

        // –°–æ–∑–¥–∞—Ç—å —É–∑–µ–ª
        nodes.push({
            id: path.id.toString(),
            type: nodeType,
            data: {
                path,
                label: path.name,
                dataType: path.data_type,
                isRequired: path.is_required,
                isIndexed: path.is_indexed,
                isReadonly: path.is_readonly,
                sourceBlueprintName: path.source_blueprint?.name,
            },
            position: { x: parentX, y: parentY + level * 100 },
        });

        // –°–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å —Å —Ä–æ–¥–∏—Ç–µ–ª–µ–º
        if (path.parent_id) {
            edges.push({
                id: `e${path.parent_id}-${path.id}`,
                source: path.parent_id.toString(),
                target: path.id.toString(),
                type: "smoothstep",
                animated: path.is_readonly,
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã
        if (path.children) {
            path.children.forEach((child, index) => {
                traverse(child, level + 1, parentX + index * 200, parentY);
            });
        }
    };

    paths.forEach((path, index) => traverse(path, 0, index * 300, 0));

    return { nodes, edges };
};

/**
 * –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ–º–ø–æ–Ω–æ–≤–∫—É –≥—Ä–∞—Ñ–∞ —á–µ—Ä–µ–∑ dagre.
 */
export const applyDagreLayout = (
    nodes: Node[],
    edges: Edge[],
    direction: "TB" | "LR" = "TB"
) => {
    const dagreGraph = new dagre.graphlib.Graph();
    dagreGraph.setDefaultEdgeLabel(() => ({}));
    dagreGraph.setGraph({ rankdir: direction, nodesep: 100, ranksep: 80 });

    nodes.forEach((node) => {
        dagreGraph.setNode(node.id, { width: 200, height: 80 });
    });

    edges.forEach((edge) => {
        dagreGraph.setEdge(edge.source, edge.target);
    });

    dagre.layout(dagreGraph);

    return nodes.map((node) => {
        const position = dagreGraph.node(node.id);
        return {
            ...node,
            position: { x: position.x, y: position.y },
        };
    });
};
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

-   Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ (300ms)
-   Virtualization –¥–ª—è –±–æ–ª—å—à–∏—Ö –≥—Ä–∞—Ñ–æ–≤ (react-flow –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
-   –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (layout calculation, –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
-   –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è UI –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏
-   –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —É–∑–ª–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ localStorage –∏–ª–∏ –Ω–∞ –±—ç–∫–µ)

---

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π —Å—Ö–µ–º—ã "Article"

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å Blueprint —Å –ø–æ–ª—è–º–∏ title, content, author.

**–î–µ–π—Å—Ç–≤–∏—è –≤ –≥—Ä–∞—Ñ–µ:**

1. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å—Ö–µ–º—ã Blueprint "Article"
2. –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —É–∑–µ–ª"
3. –í —Ñ–æ—Ä–º–µ NodeForm:
    - name: `title`
    - data_type: `string`
    - is_required: ‚úì
    - is_indexed: ‚úì
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è `content` (text) –∏ `author` (string)

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≥—Ä–∞—Ñ–µ:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  title  ‚îÇ  ‚îÇ content  ‚îÇ  ‚îÇ author ‚îÇ
‚îÇ string  ‚îÇ  ‚îÇ   text   ‚îÇ  ‚îÇ string ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `author` –∫–∞–∫ json –≥—Ä—É–ø–ø—É —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ `name` –∏ `email`.

**–î–µ–π—Å—Ç–≤–∏—è:**

1. –°–æ–∑–¥–∞—Ç—å —É–∑–µ–ª `author` —Å data_type = `json`
2. –ü–ö–ú –Ω–∞ —É–∑–ª–µ `author` ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª"
3. –°–æ–∑–¥–∞—Ç—å —É–∑–µ–ª `name` (string)
4. –ü–ö–ú –Ω–∞ —É–∑–ª–µ `author` ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª"
5. –°–æ–∑–¥–∞—Ç—å —É–∑–µ–ª `email` (string)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ author  ‚îÇ (–∑–µ–ª–µ–Ω—ã–π, —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π)
‚îÇ  json   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
  ‚îå‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îê
  ‚ñº     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇname‚îÇ ‚îÇ email ‚îÇ
‚îÇstr ‚îÇ ‚îÇ  str  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä 3: –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ Blueprint "Address"

**–ó–∞–¥–∞—á–∞:** –í—Å—Ç—Ä–æ–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π Blueprint "Address" –≤ –ø–æ–ª–µ `office`.

**–î–µ–π—Å—Ç–≤–∏—è:**

1. –°–æ–∑–¥–∞—Ç—å —É–∑–µ–ª `office` —Å data_type = `json`
2. –ü–ö–ú –Ω–∞ —É–∑–ª–µ `office` ‚Üí "–í—Å—Ç—Ä–æ–∏—Ç—å Blueprint –∑–¥–µ—Å—å"
3. –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:
    - –í—ã–±—Ä–∞—Ç—å Blueprint: "Address"
    - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–≤—å—é (street, city, zip)
    - –ù–∞–∂–∞—Ç—å "–í—Å—Ç—Ä–æ–∏—Ç—å"
4. –£–∑–ª—ã –∏–∑ Address –ø–æ—è–≤—è—Ç—Å—è –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–µ –∫ `office` (—Å–µ—Ä—ã–µ, readonly)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ office  ‚îÇ (–∑–µ–ª–µ–Ω—ã–π)
‚îÇ  json   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Address Blueprint‚îÇ (—Å–µ—Ä—ã–π —Ñ–æ–Ω)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚ñº       ‚ñº     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇstreet‚îÇ ‚îÇcity‚îÇ ‚îÇ zip ‚îÇ (–≤—Å–µ —Å–µ—Ä—ã–µ, readonly)
‚îÇ str  ‚îÇ ‚îÇstr ‚îÇ ‚îÇ str ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä 4: –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—å readonly —É–∑–µ–ª

**–°–∏—Ç—É–∞—Ü–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–µ `street` (–∏–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Address).

**–î–µ–π—Å—Ç–≤–∏–µ:** –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ —É–∑–ª–µ `street`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

-   –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º:

    ```
    ‚ö†Ô∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ

    –≠—Ç–æ –ø–æ–ª–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ Blueprint "Address".

    –ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É Blueprint:
    [–û—Ç–∫—Ä—ã—Ç—å Blueprint "Address"]

    –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ –ø–æ–ª–µ,
    –Ω–æ –Ω–µ –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ —Ç–∏–ø –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
    ```

-   –ö–Ω–æ–ø–∫–∏: [–û—Ç–∫—Ä—ã—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π Blueprint] [–ó–∞–∫—Ä—ã—Ç—å]

### –ü—Ä–∏–º–µ—Ä 5: –£–¥–∞–ª–µ–Ω–∏–µ —É–∑–ª–∞ —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

**–°–∏—Ç—É–∞—Ü–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç —É–∑–µ–ª `author` (json), —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ `name` –∏ `email`.

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–ö–ú –Ω–∞ —É–∑–ª–µ `author` ‚Üí "–£–¥–∞–ª–∏—Ç—å"

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

-   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:

    ```
    ‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å —É–∑–µ–ª "author"?

    –ë—É–¥—É—Ç —Ç–∞–∫–∂–µ —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã:
    ‚Ä¢ author.name
    ‚Ä¢ author.email

    –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–∏—Ö –ø–æ–ª—è—Ö –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.

    –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.
    ```

-   –ö–Ω–æ–ø–∫–∏: [–£–¥–∞–ª–∏—Ç—å] [–û—Ç–º–µ–Ω–∏—Ç—å]

### –ü—Ä–∏–º–µ—Ä 6: –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π —É–∑–µ–ª

**–°–∏—Ç—É–∞—Ü–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–∏—Ç—å Blueprint –≤ —É–∑–µ–ª —Ç–∏–ø–∞ `string`.

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–ö–ú –Ω–∞ —É–∑–ª–µ `title` (string) ‚Üí –ø—É–Ω–∫—Ç "–í—Å—Ç—Ä–æ–∏—Ç—å Blueprint –∑–¥–µ—Å—å" **–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω**

**Tooltip –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç:**

```
–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ Blueprint –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ —É–∑–ª—ã —Ç–∏–ø–∞ JSON.
–ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ —ç—Ç–æ—Ç —É–∑–µ–ª –≤ JSON –≥—Ä—É–ø–ø—É –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π —É–∑–µ–ª.
```

---
