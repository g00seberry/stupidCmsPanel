---
alwaysApply: true
---

# Минималистичный код: правила генерации (TypeScript + React + MobX + AntD + Tailwind)

## 0) Запреты и приоритеты

- **Запрещено** создавать **кастомные React-хуки** (`useXxx`). Используйте локальную логику в компонентах, обычные `const`-функции или утилиты.
- Не добавлять новых либ без явного указания. Сначала — стандартный React/TS, MobX, AntD, Tailwind.
- Не создавать абстракции «на будущее». Только то, что нужно сейчас.

## 1) Общий стиль и форматирование

- Всегда `const` и **стрелочные функции**; не использовать `function`/`var`.
- Соблюдать Prettier проекта: `singleQuote: true`, `printWidth: 100`, `arrowParens: "avoid"`, `semi: true`, `endOfLine: "lf"`.
- Импорты через алиас `@` там, где возможно; относительные — только внутри близких модулей.
- Одна сущность — один файл. Имена файлов по умолчанию `camelCase`. Если файл = сущность — имя файла = имя сущности (может быть `PascalCase`).

## 2) Типы, Zod, именование

- Типы и интерфейсы: **только явные**, без `any` (если неизбежно — оставить как можно меньшее пятно и пометить TODO).
- Имена пропсов для компонента: `Props{ComponentName}`.
- Zod: схема — `zSomething`, выведенный тип — `ZSomething`.
- Публичные сущности (классы, компоненты, функции, типы) сопровождаются **кратким JSDoc** (1–3 строки).

## 3) React-компоненты

- Функциональные компоненты в формате:
  - `export const ComponentName: React.FC<PropsComponentName> = props => { ... }`
  - Без обёрток и HOC, если не требуется.
- Состояние хранить минимально: предпочтительно в MobX-сторах. Локальный `useState` — только для UI-дребезга.
- **Не** создавать кастомные хуки: общую логику выносить в чистые утилиты (`utils/*.ts`) или методы стора.
- Эффекты — только при реальной необходимости, с корректными зависимостями. Никакой избыточной синхронизации.
- Разметка — простая, без лишних контейнеров; выравнивание через Tailwind.

## 4) MobX

- Сторы — классы с `makeAutoObservable(this)` в конструкторе.
- Публичные методы стора — краткие, с чёткими эффектами; загрузки помечать флагами `pending`, `relogin` и т.п.
- Компоненты, зависящие от стора, оборачивать в `observer`.
- Не выносить одноразовую логику в отдельные сторы.
- **Для MobX 6: использовать сеттеры (`setXxx`) вместо прямых присваиваний в `runInAction`.** Например: `setLoading(value)` вместо `runInAction(() => { this.loading = value })`. Это обеспечивает лучшую типобезопасность и читаемость кода.

## 5) Ant Design + Tailwind

- Использовать готовые компоненты AntD; не переизобретать контролы.
- Стили — преимущественно **Tailwind utility-классы** и токены темы. **Не** использовать CSS-in-JS.
- Никаких «магических» цветов: только переменные темы/токены.
- Кнопки/формы — по умолчанию в стандартном стиле; без декоративных перегрузок.
- **Для навигации использовать `Link` из `react-router-dom` вместо `Button` с `onClick` и `navigate()`.** Оборачивать `Button` из Ant Design внутри `Link` для сохранения стандартных стилей кнопок без дополнительной стилизации.

## 6) Архитектура и импорты

- Папки: `components`, `pages`, `layouts`, `providers`, `stores`/`*Store.ts`, `utils`, `types`, `api`.
- Импорты группировать: внешние → алиас `@` → относительные; без ре-экспортов «ради красоты».
- Один уровень абстракции на функцию/файл. Если функция слишком длинная — выделить маленькие чистые функции в `utils`.

## 7) Ошибки, асинхронность и API

- Асинхронные операции — `try/catch`. Ошибки прогонять через общий обработчик (`onError`) и показывать нотификации через существующий провайдер.
- Никаких «тихих» `catch {}`. Либо лог, либо пользовательское уведомление.
- Ответы API валидировать Zod-схемами при необходимости; типы — из схем.

## 8) Тесты и проверка

- Юнит-тесты (vitest) — на чистые утилиты и сторы. Схемы валидировать тест-кейсами на happy/edge-path.
- ESLint/Prettier — без отключений правил, кроме локально обоснованных.

## 9) Производительность и чистота

- Избегать ненужного `useMemo`/`useCallback` — только если есть доказанная польза.
- Не добавлять «обёртки ради обёрток»; минимизировать проп-дрилл.
- Удалять мёртвый код и неиспользуемые импорты.

## 10) Примеры мини-решений

- Валидация формы — встроенные возможности AntD + простые утилиты; без кастомных хуков.
- Разделение кода — только для крупных страниц/блоков через динамический импорт Vite/React.
- Именование тестов/файлов — рядом с кодом: `something.test.ts`.
