# Breaking Change: Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸

## Ð”Ð°Ñ‚Ð° Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ: 2025-01-XX

## âš ï¸ Ð’ÐÐ–ÐÐž: Breaking Change

Ð£Ð´Ð°Ð»ÐµÐ½Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð³Ð¾ Ð¸ ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸. Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ **Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚**.

---

## ðŸ“‹ Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ

### Ð£Ð´Ð°Ð»ÐµÐ½Ñ‹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹:

1. **ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ (ÑÑ‚Ñ€Ð¾ÐºÐ°)** â€” Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ
2. **Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ (ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ)** â€” Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ

### ÐžÑÑ‚Ð°Ð»ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾:

**Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚** â€” ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚

---

## ðŸ”„ Ð—Ð°Ñ‚Ñ€Ð¾Ð½ÑƒÑ‚Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°

### 1. Ð£ÑÐ»Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°
- `required_if`
- `prohibited_unless`
- `required_unless`
- `prohibited_if`

### 2. ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¸ ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ñ
- `unique`
- `exists`

---

## ðŸ“ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

### Ð£ÑÐ»Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°

#### âŒ Ð‘Ñ‹Ð»Ð¾ (ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾):
```json
{
  "validation_rules": {
    "required_if": "is_published"
  }
}
```

```json
{
  "validation_rules": {
    "required_if": {
      "is_published": true
    }
  }
}
```

#### âœ… Ð¡Ñ‚Ð°Ð»Ð¾ (Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾):
```json
{
  "validation_rules": {
    "required_if": {
      "field": "is_published",
      "value": true,
      "operator": "=="
    }
  }
}
```

**ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ**: ÐŸÐ¾Ð»Ðµ `operator` Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ `"=="`. Ð”Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ: `"=="`, `"!="`, `">"`, `"<"`, `">="`, `"<="`.

---

### ÐŸÑ€Ð°Ð²Ð¸Ð»Ð¾ unique

#### âŒ Ð‘Ñ‹Ð»Ð¾ (ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾):
```json
{
  "validation_rules": {
    "unique": "users"
  }
}
```

#### âœ… Ð¡Ñ‚Ð°Ð»Ð¾ (Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾):
```json
{
  "validation_rules": {
    "unique": {
      "table": "users",
      "column": "email"
    }
  }
}
```

**ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ñ Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ð¾Ð»ÑÐ¼Ð¸**:
```json
{
  "validation_rules": {
    "unique": {
      "table": "users",
      "column": "email",
      "except": {
        "column": "id",
        "value": 1
      },
      "where": {
        "column": "status",
        "value": "active"
      }
    }
  }
}
```

**ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ**: 
- `table` â€” **Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾**
- `column` â€” Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¸Ð¼Ñ Ð¿Ð¾Ð»Ñ)
- `except` â€” Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ (Ð´Ð»Ñ update Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹)
- `where` â€” Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ (Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ WHERE ÑƒÑÐ»Ð¾Ð²Ð¸Ðµ)

---

### ÐŸÑ€Ð°Ð²Ð¸Ð»Ð¾ exists

#### âŒ Ð‘Ñ‹Ð»Ð¾ (ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾):
```json
{
  "validation_rules": {
    "exists": "categories"
  }
}
```

#### âœ… Ð¡Ñ‚Ð°Ð»Ð¾ (Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾):
```json
{
  "validation_rules": {
    "exists": {
      "table": "categories",
      "column": "id"
    }
  }
}
```

**ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ñ Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ð¾Ð»ÑÐ¼Ð¸**:
```json
{
  "validation_rules": {
    "exists": {
      "table": "categories",
      "column": "id",
      "where": {
        "column": "status",
        "value": "active"
      }
    }
  }
}
```

**ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ**: 
- `table` â€” **Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾**
- `column` â€” Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¸Ð¼Ñ Ð¿Ð¾Ð»Ñ)
- `where` â€” Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ (Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ WHERE ÑƒÑÐ»Ð¾Ð²Ð¸Ðµ)

---

## ðŸš¨ ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸

ÐŸÑ€Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð° API Ð²ÐµÑ€Ð½ÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸:

### Ð”Ð»Ñ ÑƒÑÐ»Ð¾Ð²Ð½Ñ‹Ñ… Ð¿Ñ€Ð°Ð²Ð¸Ð»:
```
Ð£ÑÐ»Ð¾Ð²Ð½Ð¾Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾ 'required_if' Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼ Ñ ÐºÐ»ÑŽÑ‡Ð°Ð¼Ð¸ 'field', 'value' Ð¸ Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ 'operator'.
```

Ð¸Ð»Ð¸

```
Ð£ÑÐ»Ð¾Ð²Ð½Ð¾Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾ 'required_if' Ð´Ð¾Ð»Ð¶Ð½Ð¾ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¿Ð¾Ð»Ðµ 'field'.
```

### Ð”Ð»Ñ unique/exists:
```
ÐŸÑ€Ð°Ð²Ð¸Ð»Ð¾ 'unique' Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð¼ Ñ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ ÐºÐ»ÑŽÑ‡Ð¾Ð¼ 'table'.
```

Ð¸Ð»Ð¸

```
ÐŸÑ€Ð°Ð²Ð¸Ð»Ð¾ 'unique' Ð´Ð¾Ð»Ð¶Ð½Ð¾ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¿Ð¾Ð»Ðµ 'table'.
```

---

## âœ… Ð§ÐµÐº-Ð»Ð¸ÑÑ‚ Ð´Ð»Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

- [ ] ÐÐ°Ð¹Ñ‚Ð¸ Ð²ÑÐµ Ð¼ÐµÑÑ‚Ð°, Ð³Ð´Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ (ÑÑ‚Ñ€Ð¾ÐºÐ°) Ð´Ð»Ñ `required_if`, `prohibited_unless`, `required_unless`, `prohibited_if`
- [ ] ÐÐ°Ð¹Ñ‚Ð¸ Ð²ÑÐµ Ð¼ÐµÑÑ‚Ð°, Ð³Ð´Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ (ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ) Ð´Ð»Ñ ÑƒÑÐ»Ð¾Ð²Ð½Ñ‹Ñ… Ð¿Ñ€Ð°Ð²Ð¸Ð»
- [ ] ÐÐ°Ð¹Ñ‚Ð¸ Ð²ÑÐµ Ð¼ÐµÑÑ‚Ð°, Ð³Ð´Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ (ÑÑ‚Ñ€Ð¾ÐºÐ°) Ð´Ð»Ñ `unique` Ð¸ `exists`
- [ ] Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð½Ð° Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°Ð¼ Ð²Ñ‹ÑˆÐµ
- [ ] ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ/Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Path Ñ‡ÐµÑ€ÐµÐ· API
- [ ] Ð£Ð±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Entry Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾

---

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ

- ÐŸÐ¾Ð»Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ: `docs/blueprint-validation-system.md`
- API ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹: `POST /api/v1/admin/blueprints/{blueprint}/paths` Ð¸ `PUT /api/v1/admin/paths/{path}`

---

## â“ Ð’Ð¾Ð¿Ñ€Ð¾ÑÑ‹?

ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼ Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ð¹Ñ‚ÐµÑÑŒ Ðº Ð±ÑÐºÐµÐ½Ð´-ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ.

